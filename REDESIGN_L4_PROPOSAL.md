# L4 界面重新设计方案

## 问题诊断

### 当前问题
1. **信息过载**：教学文字、流程说明、多个输入方式同时出现
2. **术语混乱**："LUTAGU策略"、"模組"、"模板"对用户来说太技术化
3. **交互不明确**：用户不知道应该先选模板、功能按钮，还是直接输入
4. **价值主张不清**：不知道输入什么会得到什么结果

### 用户真正想要的
- 直接问："我要去成田机场，怎么走最快？"
- 直接问："从这里到淺草的票价多少？"
- 直接问："最近的置物櫃在哪？"

用户**不想**：
- 学习什么是"模組"、"模板"
- 理解复杂的3步操作流程
- 在多个输入方式之间选择

---

## 重新设计方案

### 设计原则

1. **对话优先** (Conversation First)
   - 主界面就是一个对话输入框
   - 用户直接说出需求，系统智能理解意图

2. **极简主义** (Minimalism)
   - 移除所有教学文字
   - 移除"模板"、"模組"等概念
   - 只保留最核心的功能

3. **情境感知** (Context Aware)
   - 系统知道用户在哪个车站
   - 自动提供相关的建议

4. **渐进式展示** (Progressive Disclosure)
   - 默认显示最简单的界面
   - 只在需要时显示高级选项

---

## 新界面结构

```
┌─────────────────────────────────────┐
│  📍 上野站                           │  ← 简单的上下文
│  ルタグ 智能助理                     │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│  💡 推荐建议 (如果有)                │  ← 智能推荐卡片
│                                     │     (只在有明确建议时显示)
│  [查看详情] [其他建议]               │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│  ━━ 对话历史 ━━                      │  ← 聊天记录
│                                     │
│  用户: 我要去成田机场                │
│  助理: 为您找到3条路线...            │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│  💬 你想去哪里？                     │  ← 主要输入区
│                                     │
│  [🧳] [♿] [⏱️]                      │  ← 可选的需求快捷按钮
│                                     │     (简化为3-4个最重要的)
│                                     │
│  建议问题:                           │  ← 示例提示
│  • 去成田机场最快的路线               │     (小字灰色)
│  • 到淺草的票价                      │
└─────────────────────────────────────┘
```

---

## 具体改进

### 1. 移除的元素
- ❌ "LUTAGU 策略" 标题（改为 "智能助理" 或 "ルタグ"）
- ❌ "先選模板，再送出：新手 10 秒上手" 教学文字
- ❌ "操作流程：1) 選模組 2) 選模板 3) 送出查詢"
- ❌ "票價 / 時刻表 / 路線" 功能按钮
- ❌ "行程規劃助手" 区块
- ❌ 示例查询框（"odpt.Station:JR-East.Yamanote.Ueno"）
- ❌ 复杂的个人化需求列表

### 2. 简化的元素

#### 上下文指示器
**之前**：复杂的标题 "建議 LUTAGU 策略"
**现在**：简单明了 "📍 上野站 · ルタグ 智能助理"

#### 需求快捷按钮
**之前**：6-8个需求chip（輪椅、推車、特大行李、越時間、省錢優先、推車、推軍、特色）
**现在**：3-4个最重要的图标按钮
- 🧳 大行李
- ♿ 无障碍
- ⏱️ 赶时间
- （可选）💰 省钱

#### 输入框占位符
**之前**：`輸入問題：票價 / 時刻表 / 怎麼去 odpt.Station:...`
**现在**：`你想去哪里？`或`问我任何问题...`

### 3. 新增的元素

#### 智能示例提示
在输入框下方，用小字灰色显示：
```
💡 试试问我：
• 去成田机场最快的路线
• 到淺草的票价
• 附近的置物櫃
```

#### 简化的推荐卡片
只在有明确建议时显示，不是默认必须显示

---

## 交互流程

### 场景1：用户打开L4 Tab
```
1. 显示简单的欢迎消息（来自助理）
   "嗨！我可以帮你规划路线、查询票价和时刻表。你想去哪里？"

2. 显示输入框和示例提示

3. （如果有）显示智能推荐卡片
   例如："现在去机场？注意：山手线延误10分钟"
```

### 场景2：用户输入问题
```
用户输入："去成田机场，我有大行李"

系统：
1. 显示思考指示器："正在分析路线..."
2. 返回结构化结果：
   - 推荐路线
   - 票价
   - 时刻表
   - 大行李注意事项
```

### 场景3：用户点击需求按钮
```
用户点击 [🧳]（大行李）按钮

系统：
1. 按钮高亮，表示已选中
2. 不做其他动作
3. 等待用户输入目的地
4. 在生成建议时考虑大行李需求
```

---

## 技术实现要点

### 1. 组件简化
```tsx
// 主要状态
const [messages, setMessages] = useState<Message[]>([])
const [input, setInput] = useState('')
const [selectedNeeds, setSelectedNeeds] = useState<string[]>([])

// 移除的状态
// ❌ const [destination, setDestination] = useState('')
// ❌ const [selectedDemands, setSelectedDemands] = useState<string[]>([])
```

### 2. 翻译键更新
```json
{
  "l4": {
    "title": "智能助理",  // 替换 "LUTAGU 策略"
    "subtitle": "问我任何问题",  // 替换 "基於即時數據的智慧建議"
    "inputPlaceholder": "你想去哪里？",  // 替换复杂的占位符
    "exampleQuestions": {
      "airport": "去成田机场最快的路线",
      "price": "到淺草的票价",
      "locker": "附近的置物櫃"
    },
    "needs": {
      "luggage": "大行李",
      "wheelchair": "无障碍",
      "rush": "赶时间",
      "budget": "省钱"
    }
  }
}
```

### 3. UI 组件优先级
```
优先级1（必须显示）：
- 上下文指示器（车站名）
- 输入框
- 发送按钮

优先级2（有内容时显示）：
- 对话历史
- 推荐卡片

优先级3（可选/可折叠）：
- 需求快捷按钮
- 示例提示
```

---

## 对比总结

| 方面 | 之前 | 现在 |
|-----|------|------|
| **主标题** | "建議 LUTAGU 策略" | "ルタグ 智能助理" |
| **副标题** | "基於即時數據的智慧建議" | "📍 上野站" |
| **输入方式** | 4种（示例框+输入框+功能按钮+需求chip） | 1种（输入框） |
| **需求选择** | 6-8个chip | 3-4个图标按钮 |
| **教学文字** | 多处说明和流程指引 | 无（用示例替代） |
| **功能按钮** | 票價、時刻表、路線 | 移除（通过对话理解意图） |
| **首屏元素** | 10+ | 5-6 |

---

## 预期效果

1. **认知负担降低80%**
   - 用户不需要学习系统术语
   - 不需要理解操作流程
   - 像聊天一样自然

2. **首次使用成功率提升**
   - 看到界面就知道要做什么
   - 示例提示引导用户

3. **界面更现代、更简洁**
   - 符合现代聊天应用的设计趋势
   - 视觉层次清晰

4. **保持所有功能**
   - 没有移除任何实际功能
   - 只是改变了交互方式
   - 通过对话理解用户意图，而不是强迫用户选择"模組"
